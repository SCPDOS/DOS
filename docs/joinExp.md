
##Join experiment
<pre>
-----------------------------------------------------------------
Before
-----------------------------------------------------------------
43 3a 5c 46 4c 4f 50 50-59 00 00 00 00 00 00 00  C:\FLOPPY.......
00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00  ................
00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00  ................
00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00  ................
00 00 00 00 60 20 74 6a-02 ff ff ff ff ff ff 02  ....` tj........
00 
42 3a 5c 00 00 00 00-00 00 00 00 00 00 00 00 00  B:\.............
00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00  ................
00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00  ................
00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00  ................
00 00 00 00 40 40 74-6a 02 ff ff ff ff ff ff 02  ....@@tj........
00 
43 3a 5c 00 00 00-00 00 00 00 00 00 00 00 00 00  C:\.............
00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00  ................
00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00  ................
00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00  ................
00 00 00 00 40 60-74 6a 02 00 00 ff ff ff ff 02  ....@`tj........
00 
-----------------------------------------------------------------
After
-----------------------------------------------------------------
43 3a 5c 46 4c 4f 50 50-59 00 00 00 00 00 00 00  C:\FLOPPY.......
00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00  ................
00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00  ................
00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00  ................
00 00 00 00 60 20 74 6a-02 21 06 ff ff ff ff 02  ....` tj.!......
00 
42 3a 5c 00 00 00 00-00 00 00 00 00 00 00 00 00  B:\.............
00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00  ................
00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00  ................
00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00  ................
00 00 00 00 40 40 74-6a 02 ff ff ff ff ff ff 02  ....@@tj........
00 
43 3a 5c 46 4c 4f-50 50 59 5c 54 45 53 54 00 00  C:\FLOPPY\TEST..
00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00  ................
00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00  ................
00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00  ................
00 00 00 00 40 60-74 6a 02 ff ff ff ff ff ff 02  ....@`tj........
00

-----------------------------------------------------------------
-----------------------------------------------------------------
-----------------------------------------------------------------
Conclusions:

The following is a copy of the CDS structure from SCP/DOS.
struc cds       ;Current Directory structure
    .sCurrentPath        db 67 dup (?)    ;Current Directory Path String
    .wFlags              dw ?   ;CDS Flags - 
    .qDPBPtr             dq ?   ;Ptr to the DPB of the dev using this CDS
    .dStartCluster       dd ?   ;Starting cluster of the directory on disk
    .qIFSPtr             dq ?   ;Reserved for IFS driver expansions
    .wNetStore           dw ?   ;For storing the net word (41h/5F03h)
    .wBackslashOffset    dw ?   ;How many chars to skip for getting the path
endstruc
The following is the MS-DOS equivalent structure:
struc mscds
    .sCurrentPath        db 67 dup (?)    ;Current Directory Path String
    .wFlags              dw ?   ;CDS Flags - 
    .dDPBPtr             dd ?   ;Ptr to the DPB of the dev using this CDS
    .wStartCluster       dw ?   ;Starting cluster of the directory on disk
    .dIFSPtr             dd ?   ;Reserved for IFS driver expansions
    .wNetStore           dw ?   ;For storing a net word
    .wBackslashOffset    dw ?   ;How many chars to skip for getting the path
endstruc


In the above experiment we see that the joined drive (A), which
was joined to directory C:\FLOPPY, obtains the path C:\FLOPPY 
in the cds.sCurrentPath field and has its wStartCluster set to -1.
The CDS for C is left alone.

When CHDIR occurs on C to C:\FLOPPY\TEST, the cds.wStartCluster 
(which in SCPDOS cds.dStartCluster) for the C drive is set to -1,
even though the sCurrentPath obtains the full path. The wStartCluster
field for the A drive is now set to the actual start cluster for the 
directory of A:\TEST and the sCurrentPath is still left at C:\FLOPPY.


These are the steps that need to be replicated for SCP/DOS's JOIN.
</pre>
